                _                    ___   _  _____
 _ __ ___   ___| |_ ___  ___        / _ \ / ||___  |
| '_ ` _ \ / _ \ __/ _ \/ _ \ _____| | | || |   / /
| | | | | |  __/ ||  __/ (_) |_____| |_| || |_ / /
|_| |_| |_|\___|\__\___|\___/       \___(_)_(_)_/


What's this?
------------

This directory contains interface programs to retrieve data from a
Davis Instruments weather station. The architecture is sufficiently
generic to acommodate other weather stations as well, but as I don't
have access to other hardware, no interface code is included.

The home of the meteo tools is at http://meteo.othello.ch, where 
you will always find the current release. For sample installations
see http://www.othello.ch/meteo and http://grossalp.othello.ch/meteo.
There is also a mailing list, you subscribe to it by sending a message
containing nothing but the line

	subscribe meteo

to majordomo@lists.othello.ch.


Prerequisites
-------------

GD	To compile this package, you will need a complete installation of
	Tom Boutell's GD library, which you can get from www.boutell.com.
	Note that the meteo programs expect to be able to create PNG images,
	so zlib and libpng must also be installed. Some installations with
	GD already installed may also need the freetype libraries, as GD
	may be built with freetype support.

MySQL	The meteo programs write the data retrieved from the weather 
	station into a MySQL database. To build the programs, you therefore
	need the MySQL client libraries. Visit www.mysql.com for details
	on how to get MySQL for your plattform.

Weather Station URLs
--------------------

These programs use a URL type description of the weather-station
to talk to and the parameters necessary to connect. There are basically 
two methods to connect to a weather station: 

 1. through a direct serial connection, indicated by an URL of the
    form 

	file:///dev/ttyS0

    this form allows for things that are not really devices like pipes
    to other processes that themselves get the data from a `real'
    device. It even allows for Unix domain sockets.

 2. through a TCP connection to a terminal server that has the weather
    station connected to one of its serial ports, indicated by a 
    URL of the form

	tcp://hostname:port


Architecture
------------

The meteo programs use separate processes to retrieve the data from the
weather station, to compute averages over intervals of 5min, 30min, 2h
and a day, and to draw graphs suitable for a web page. A full installation
will have three processes permanently running:

meteoloop	collect data from the station and write a record to
		the message queue used to decouple database operations
		from weather station communication.

meteodequeue	pulls update messages of the message queue and sends
		them to the database. By handling database updates outside
		the process that communicates with the weather station,
		long queries blocking the stationdata table will not
		cause weather data to be lost.

meteoavg	compute averages over longer intervals than one minute.
		As these averaging operations can be quite time
		consuming, moving them outside the meteoloop program
		again improves reliablity.

To produce the graphs, the separate programm meteograph is called, usually
from a cron job. 

Installation
------------

Read the INSTALL for installation instructions. Please also check the end
of that file for plattform specific instructions.

--
$Id: README,v 1.7 2002/01/07 01:08:44 afm Exp $
