<!--

 meteo.xml  **	graph configuration file (fixes colors and scales for the
		meteo graphs) This version expresses the graphs we were used
		to in previous release completely in the new XML syntax.

 (c) 2001 Dr. Andreas Mueller, Beratung und Entwicklung

 $Id: meteo.xml,v 1.15 2003/08/24 20:26:40 afm Exp $

  -->
<meteo>
  <database>
    <hostname>localhost</hostname>
    <dbname>meteo</dbname>
    <user>meteo</user>
    <password>public</password>
    <writer>meteoupdate</writer>
    <writerpassword>m57cwrt</writerpassword>
    <msgqueue>/tmp/meteodb-queue</msgqueue>
    <updatefile>/var/log/meteoupdate.log</updatefile>
    <prefix>meteo</prefix>
  </database>

  <units>
    <temperature>C</temperature>
  </units>

  <station name="Altendorf">
    <!-- <url>file:///dev/ttyS0</url> -->
    <url>tcp://weathermonitor.othello.ch:10001</url>
    <type>WMII</type>
    <speed>2400</speed>
  </station>

  <station name="Gurin">
    <url>file:///dev/ttyS0</url>
    <type>VantagePro</type>
    <speed>2400</speed>
  </station>

  <graphs>
    <graph name="temperature-new" height="300" width="600"  bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="center">Temperatur grad C</leftlabel>
      <rightlabel align="center">relative Humidity %</rightlabel>
      <leftaxis type="dynamic" maxname="tt" minname="dd" min="-100" max="100"
	origin="0" maxtickcount="20"
	first="-100" 
	last="100" step="10" format="%.1f" ticks="yes" gridlines="yes"/>
      <rightaxis min="0" max="100" first="0" last="100" step="20" format="%3.0f"
        ticks="yes" gridlines="no"/>
      <graphwindow llx="55" lly="19" urx="545" ury="293"/>
      <channels>

	<query>
	  <select name="t">temperature</select>
	  <select name="tmax">temperature_max</select>
	  <select name="tmin">temperature_min</select>
	  <select name="h">humidity</select>
	  <select name="hmax">humidity_max</select>
	  <select name="hmin">humidity_min</select>
	  <data name="tt">
	    <function name="floor" limit="-50">
	      <function name="ceil" limit="50">
		<value name="t"/>
	      </function>
	    </function>
	  </data>
	  <data name="dewpointmin">
	    <function2 name="dewpoint">
	      <value name="hmin"/>
	      <value name="tmin"/>
	    </function2>
	  </data>
	  <data name="dewpointmax">
	    <function2 name="dewpoint">
	      <value name="hmax"/>
	      <value name="tmax"/>
	    </function2>
	  </data>
	  <data name="dewpoint">
	    <function2 name="dewpoint">
	      <value name="h"/>
	      <value name="t"/>
	    </function2>
	  </data>
	  <data name="dd">
	    <function name="floor" limit="-50">
	      <value name="dewpoint"/>
	    </function>
	  </data>
	</query>

	<channel color="#aaaaff" type="range" scale="left"
	  namelower="dewpointmin" nameupper="dewpointmax"/>
	<channel color="#0000ff" type="curve" scale="left" name="dewpoint"/>
	<channel color="#ffaaaa" type="range" scale="left"
	  namelower="tmin" nameupper="tmax"/>
	<channel color="#654321" type="curve" scale="left" name="tt"/>
	<channel color="#dddddd" type="nodata" name="t"/>

      </channels>
    </graph>

    <!-- Temperature graph -->
    <graph name="temperature" height="144" width="500" bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="center">Temperature (deg C)</leftlabel>
      <leftaxis type="static" min="-15" max="35"
	first="-10" last="30" step="10" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <graphwindow llx="55" lly="19" urx="455" ury="139"/>
      <channels>
	<query>
	  <select name="t">temperature</select>
	  <select name="tmin">temperature_min</select>
	  <select name="tmax">temperature_max</select>
	  <select name="h">humidity</select>
	  <select name="hmin">humidity_min</select>
	  <select name="hmax">humidity_max</select>
	  <data name="dewpoint">
	    <function2 name="dewpoint">
	      <value name="h"/>
	      <value name="t"/>
	    </function2>
	  </data>
	  <data name="dewpointmax">
	    <function2 name="dewpoint">
	      <value name="hmax"/>
	      <value name="tmax"/>
	    </function2>
	  </data>
	  <data name="dewpointmin">
	    <function2 name="dewpoint">
	      <value name="hmin"/>
	      <value name="tmin"/>
	    </function2>
	  </data>
	</query>
	<channel color="#d2d2ff" type="range" scale="left"
	  nameupper="dewpointmax" namelower="dewpointmin"/>
	<channel color="#6464ff" type="curve" scale="left" name="dewpoint"/>
	<channel color="#ffb4b4" type="range" scale="left"
	  nameupper="tmax" namelower="tmin"/>
	<channel color="#b40000" type="curve" scale="left" name="t"/>
	<channel color="#e6e6e6" type="nodata" name="t"/>
      </channels>
    </graph>

    <!-- inside Temperature graph -->
    <graph name="temperature_inside" height="144" width="500" bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="center">Temperature (deg C)</leftlabel>
      <leftaxis type="static" min="-15" max="35"
	first="-10" last="30" step="10" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <graphwindow llx="55" lly="19" urx="455" ury="139"/>
      <channels>
	<query>
	  <select name="t">temperature_inside</select>
	  <select name="tmin">temperature_inside_min</select>
	  <select name="tmax">temperature_inside_max</select>
	  <select name="h">humidity_inside</select>
	  <select name="hmin">humidity_inside_min</select>
	  <select name="hmax">humidity_inside_max</select>
	  <data name="dewpoint">
	    <function2 name="dewpoint">
	      <value name="h"/>
	      <value name="t"/>
	    </function2>
	  </data>
	  <data name="dewpointmax">
	    <function2 name="dewpoint">
	      <value name="hmax"/>
	      <value name="tmax"/>
	    </function2>
	  </data>
	  <data name="dewpointmin">
	    <function2 name="dewpoint">
	      <value name="hmin"/>
	      <value name="tmin"/>
	    </function2>
	  </data>
	</query>
	<channel color="#d2d2ff" type="range" scale="left"
	  nameupper="dewpointmax" namelower="dewpointmin"/>
	<channel color="#6464ff" type="curve" scale="left" name="dewpoint"/>
	<channel color="#ffb4b4" type="range" scale="left"
	  nameupper="tmax" namelower="tmin"/>
	<channel color="#b40000" type="curve" scale="left" name="t"/>
	<channel color="#e6e6e6" type="nodata" name="t"/>
      </channels>
    </graph>

    <!-- Pressure -->
    <graph name="pressure" height="144" width="500" bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="center">Pressure (hPa)</leftlabel>
      <leftaxis type="static" min="930" max="990"
	first="930" last="990" step="10" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <graphwindow llx="55" lly="19" urx="455" ury="139"/>
      <channels>
	<query>
	  <select name="p">barometer</select>
	  <select name="pmin">barometer_max</select>
	  <select name="pmax">barometer_min</select>
	</query>
	<channel color="#d2d2ff" type="range" scale="left"
	  nameupper="pmax" namelower="pmin"/>
	<channel color="#7f7fff" type="curve" scale="left" name="p"/>
	<channel color="#e6e6e6" type="nodata" name="p"/>
      </channels>
    </graph>

    <!-- Wind -->
    <graph name="wind" height="144" width="500" bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="bottom">Speed (m/s)</leftlabel>
      <rightlabel align="top">Azimut (deg)</rightlabel>
      <leftaxis type="static" min="0" max="25"
	first="0" last="15" step="5" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <rightaxis type="static" min="-540" max="360"
	first="0" last="360" step="180" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <graphwindow llx="55" lly="19" urx="455" ury="139"/>
      <channels>
	<query>
	  <select name="azi">winddir</select>
	  <select name="v">windspeed</select>
	  <select name="vmax">windgust</select>
	</query>
	<!-- note that there are some cultural differences with the wind
	     letters below. In Switzerland, Nordwind means wind _from_ the
	     north, which is wind with azimut 180deg. In other places, the
	     letters may be interpreted just the other way round, so you
	     will prefer to use letters="NESW" (pointed out by Mark Trettin)
	  -->
	<channel type="windbackground" scale="right"
	  northcolor="#e0e0ff" southcolor="#ffe0e0"
	  westcolor="#e0ffe0" eastcolor="#ffffc8"
	  letters="SWNE" />
	<channel color="#6464ff" type="curve" scale="right" name="azi"/>
	<channel color="#006400" type="histogram" scale="left" name="vmax"/>
	<channel color="#00ff00" type="histogram" scale="left" name="v"/>
	<channel color="#ffffff" type="lowdata" name="vmax" limit="0.1"/>
	<channel color="#e6e6e6" type="nodata" name="azi"/>
      </channels>
    </graph>

    <!-- Radiation -->
    <graph name="radiation" height="144" width="500" bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="center">Solar Radiation (M/m2)</leftlabel>
      <rightlabel align="center">UV index</rightlabel>
      <leftaxis type="static" min="0" max="1200"
	first="0" last="1200" step="200" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <leftaxis interval="86400" type="static" min="0" max="600"
	first="0" last="600" step="100" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <rightaxis type="static" min="0" max="12"
	first="0" last="12" step="2" format="%.0f"
	ticks="yes" gridlines="no"/>
      <rightaxis interval="86400" type="static" min="0" max="6"
	first="0" last="6" step="1" format="%.0f"
	ticks="yes" gridlines="no"/>
      <graphwindow llx="55" lly="19" urx="455" ury="139"/>
      <channels>
	<query>
	  <select name="solar">solar</select>
	  <select name="uv">uv</select>
	</query>
	<channel color="#c8b400" type="histogram" scale="left" name="solar"/>
	<channel color="#6400c8" type="curve" scale="right" name="uv"/>
	<channel color="#e6e6e6" type="nodata" name="solar"/>
      </channels>
    </graph>

    <!-- Rain -->
    <graph name="rain" height="144" width="500" bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="center">Precipitation (mm)</leftlabel>
      <rightlabel align="center">Total rain (mm)</rightlabel>
      <leftaxis interval="300" type="static" min="0" max="6"
	first="0" last="6" step="1" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <leftaxis interval="1800" type="static" min="0" max="10"
	first="0" last="10" step="2" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <leftaxis type="static" min="0" max="30"
	first="0" last="30" step="10" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <rightaxis type="dynamic" minname="totalrain" maxname="totalrain"
	origin="0" maxtickcount="10" step="10" ticks="yes" gridlines="no"
	format="%3.0f" />
      <graphwindow llx="55" lly="19" urx="455" ury="139"/>
      <channels>
	<query>
	  <select name="rain">rain</select>
	  <data name="totalrain">
	    <function name="accumulate">
	      <value name="rain"/>
	    </function>
	  </data>
	</query>
	<channel color="#0000ff" type="histogram" scale="left" name="rain"/>
	<channel color="#00ffff3f" type="curve" scale="right" name="totalrain"/>
	<channel color="#f3f3f33f" type="nodata" name="rain"/>
      </channels>
    </graph>

    <!-- humidity graph -->
    <graph name="humidity" height="144" width="500" bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="center">relavite Humdity (%)</leftlabel>
      <leftaxis type="static" min="0" max="100"
	first="0" last="100" step="20" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <graphwindow llx="55" lly="19" urx="455" ury="139"/>
      <channels>
	<query>
	  <select name="h">humidity</select>
	  <select name="hmin">humidity_max</select>
	  <select name="hmax">humidity_min</select>
	</query>
	<channel color="#d2d2ff" type="range" scale="left"
	  nameupper="hmax" namelower="hmin"/>
	<channel color="#7f7fff" type="curve" scale="left" name="h"/>
	<channel color="#e6e6e6" type="nodata" name="h"/>
      </channels>
    </graph>


    <!-- humidity_inside graph -->
    <graph name="humidity_inside" height="144" width="500" bgcolor="#ffffff"
	fgcolor="#000000">
      <leftlabel align="center">relavite Humdity (%)</leftlabel>
      <leftaxis type="static" min="0" max="100"
	first="0" last="100" step="20" format="%.0f"
	ticks="yes" gridlines="yes"/>
      <graphwindow llx="55" lly="19" urx="455" ury="139"/>
      <channels>
	<query>
	  <select name="h">humidity_inside</select>
	  <select name="hmin">humidity_inside_max</select>
	  <select name="hmax">humidity_inside_min</select>
	</query>
	<channel color="#d2d2ff" type="range" scale="left"
	  nameupper="hmax" namelower="hmin"/>
	<channel color="#7f7fff" type="curve" scale="left" name="h"/>
	<channel color="#e6e6e6" type="nodata" name="h"/>
      </channels>
    </graph>


  </graphs>

</meteo>
